git clone https://github.com/drj571/docker.git


docker run -dt -p 8787:8787 vinicius85/sparkr-rstudio
docker -run -dt -p 8787:8787 -v <path_to_file>:/mnt --name jharpole vinicius85/spark-rstudio
docker exec -it jharpole bash


#### R Script to Run in the Docker Container that will work #####

#Environment variables. It is mandatory SPARK_HOME and JAVA_HOME being set
Sys.setenv(SPARK_HOME="/opt/spark")

.libPaths(c(file.path(Sys.getenv("SPARK_HOME"), "R", "lib"), .libPaths()))

Sys.setenv(JAVA_HOME="/usr/lib/jvm/java-8-oracle/")

Sys.setenv('SPARKR_SUBMIT_ARGS'='"--packages" "com.databricks:spark-csv_2.10:1.0.3" "sparkr-shell"')
devtools::install_github('apache/spark@v1.6.0', subdir='R/pkg')
library(SparkR)

#Just stop some running SparkContext
#sparkR.stop()

#Init SparkContext and SQLContext
sc <- sparkR.init(master = "local")
sqlContext <- sparkRSQL.init(sc)
mtcarsDF <- createDataFrame(sqlContext, mtcars)
head(mtcarsDF)
map_kv <- function()
